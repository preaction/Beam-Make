#!perl

use v5.20;
use warnings;
use Beam::Make;

my $make = Beam::Make->new(
    conf => {
        'now.txt' => {
            commands => [
                'date > now.txt',
            ],
        },
        'yesterday.txt' => {
            requires => [qw( now.txt )],
            commands => [
                'date -j -v -1d -f "%a %b %d %T %Z %Y" "$(cat now.txt)" | tee yesterday.txt',
            ],
        },
        'then.txt' => {
            requires => [qw( now.txt )],
            commands => [
                'date -j -v $THEN -f "%a %b %d %T %Z %Y" "$(cat now.txt)" | tee then.txt',
            ],
        },
    },
);

$make->run( @ARGV );
